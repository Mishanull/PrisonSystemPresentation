@page "/GuardIndex"
@using StateContainer
@using BlazorSide.Pages.WardenView
@using BlazorSide.UIComponents
@using Alert = Entities.Alert
@inject IModalService modalService
@inject NavigationManager navMgr
@inject StateContainer stateContainer
@inject IModalService _modalService

@code {
    private Alert? Alert { get; set; }
    public string text { get; set; }
    protected override async Task OnInitializedAsync()
    {
        stateContainer.OnChange += ShowModal;
    }
    
    public void ShowModal()
    {
        var parameters = new ModalParameters();
        Alert = stateContainer.Property;
        text = Alert.Text;
        parameters.Add(nameof(AlertModal.Message),Alert?.Text);
        parameters.Add(nameof(AlertModal.dateTime),Alert?.DateTime);
        parameters.Add(nameof(AlertModal.duration),Alert?.DurationInMinutes);
        modalService.Show<AlertModal>("Alert", parameters);
    }
    
}